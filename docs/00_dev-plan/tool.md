## TOOL에 대한 정의 및 운영 계획


0. 개요
    - Tool = Function + Metadata + Contract
        * **Function**: 실제 수행하는 작업
        * **Metadata**: 자기 설명 (이름, 설명, 버전)
        * **Contract**: 입출력 스키마
    - TOOL은 3가지 방식으로 구성된다.
        * 내장 도구 - Built-In tools
        * 확장 도구 - Plug-In tools
        * MCP 도구 - MCP Tools
    - 모든 Tool은 LLM이 호출할 수 있도록 분명히 유일한 이름과, 자신을 설명할 수 있는 Description을 가져야 한다.  
    - 모든 Tool은 동일한 구조의 실행 인터페이스(입력, 출력 시그니처)를 가져야 한다.
    - 그래서 입출력 구조는 유연한 구조로 정의되어야 한다. 
    - 외부에서 도구를 호출할 때, 각 도구가 어떤 Type(내장,플러그인,MCP)인지 알 필요가 없어야 한다.  
    - Tool간 상호 참조하지 않도록 한다. Tool의 호출은 LLM이 오케스트레이션을 통해서 호출한다.
    - LLM이 사용하는 기능이 아닌 경우에는 Tool로 정의하지 않고, 별도의 프로젝트 구성요소가 된다.
    - 3가지 방식 모두 동일한 Tool 관리 방식을 사용하도록 해야 한다.
    - Tool의 전체 인터페이스 및 구현은 우아한 방식으로 이뤄져야 한다.
    - 전체 도구 리스트는 동등한 구조로 관리되어야 한다.(Tool registry 방식) 그리고 이것은 LLM 프롬프트가 제공되야 한다.

1. Built-In Tools
    - 시스템 필수 기능, 성능과 신뢰성 필요한 기능
    - 임베딩 캐싱, Vector DB(RAG) 등의 기능이 여기에 해당할 수 있을 것이다. 이 부분에 대해서는 깊은 고찰이 더 필요하다.
    - 사용자 정보, 대화 이력 등의 메모리 관리 시스템은 TOOL 보다는 프로젝트 구성요소로 분류하는 편이 나을 것 같다.
    - 마찬가지로 로깅이나 모니터링 등의 보조적인 기능들도 TOOL은 아니며, 프로젝트 구성요소로 구현한다.

2. Plug-In Tools
    - 도메인 특화 기능, 사용자 커스텀
    - 에이전트의 성격을 결정하는 도구가 될 수 있을 것이다.
    - 메타 프로그래밍 기법을 적용한다.(별도 dll파일, reflection, Attribute 활용)
    - menifest 파일 기반으로 도구를 설명한다.
    - 각 플러그인 도구 설정(config)은 플러그인 요소에 포함하는 구조로 구현해야 한다.(메인 프로젝트와는 독립적으로 관리 운영 배포 필요.) 

3. MCP Tools
    - 좀 더 유연하게 사용자가 확장할 수 있는 도구
    - MCP 표준을 준수하도록 한다.
    - MCP 인터페이스는 메인 로직과 분리되도록 추상화하여야 한다.

4. 기타 사항  
    - Tool은 병렬 실행 가능하지만, LLM이 bottleneck이므로 순차 진행하면 된다.
    - Tool의 실행 결과는 지속 이력 관리가 되어야 할 것이다.
    - Tool의 Caching은 각 Tool의 구현부에서 책임지도록 한다. 그것이 좀 더 합리적인 운영으로 보인다.
