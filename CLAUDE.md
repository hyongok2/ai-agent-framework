# Claude.md - AI Agent Framework 개발 가이드라인

## 핵심 원칙

### 1. 점진적 개발 철학
- **절대 한 번에 전체 시스템을 구현하지 않는다**
- 하나의 기능 단위를 완성하고 검증한 후 다음 단계로 진행한다
- 각 단계마다 컴파일과 기본 테스트를 반드시 수행한다

### 2. 코드 품질 기준
- **모든 코드는 즉시 프로덕션에 배포 가능한 수준으로 작성한다**
- TODO 주석이나 임시 구현체는 절대 작성하지 않는다
- 구현하지 않은 메서드는 만들지 않고, 필요한 시점에 추가한다

## 개발 프로세스

### Phase 1: 기초 구조 설계
1. 프로젝트 구조와 네임스페이스를 먼저 정의한다
2. 가장 핵심적인 인터페이스 하나만 정의한다
3. 해당 인터페이스의 가장 간단한 구현체를 완성한다
4. 빌드 확인 후 간단한 콘솔 앱으로 동작을 검증한다

### Phase 2: 단계별 확장
1. 새로운 기능이 필요할 때마다 기존 코드를 먼저 리팩토링한다
2. 새 기능은 기존 구조를 깨뜨리지 않는 방식으로 추가한다
3. 각 추가 기능마다 독립적으로 테스트 가능해야 한다

### Phase 3: 리팩토링 규칙
1. 동일한 코드가 두 번 이상 반복되면 즉시 메서드로 추출한다
2. 클래스가 100줄을 넘어가면 책임 분리를 고려한다
3. 메서드는 20줄을 넘지 않도록 유지한다

## SOLID 원칙 적용

### 단일 책임 원칙 (SRP)
- 각 클래스는 하나의 명확한 책임만 가진다
- 클래스 이름이 "And"나 "Or"를 포함하면 분리를 고려한다
- 변경 이유가 두 개 이상이면 클래스를 분리한다

### 개방-폐쇄 원칙 (OCP)
- 기존 코드 수정 없이 새 기능을 추가할 수 있도록 설계한다
- 추상화와 인터페이스를 적극 활용한다
- 하드코딩된 조건문보다 전략 패턴을 우선 고려한다

### 의존성 역전 원칙 (DIP)
- 구체 클래스가 아닌 인터페이스에 의존한다
- 생성자 주입을 기본으로 사용한다
- new 키워드 사용을 최소화하고 팩토리 패턴을 고려한다

## C# 특화 규칙

### 네이밍 컨벤션
- 인터페이스는 반드시 I로 시작한다
- public 멤버는 PascalCase를 사용한다
- private 필드는 _camelCase를 사용한다
- 메서드명은 동사로 시작하고 명확한 의도를 표현한다
- 반드시 1파일 1Class 원칙을 준수한다

### 비동기 처리
- 모든 I/O 작업은 async/await를 사용한다
- Task를 반환하는 메서드는 Async 접미사를 붙인다
- ConfigureAwait(false)를 라이브러리 코드에서 일관되게 사용한다

### 예외 처리
- 예상 가능한 오류는 Result 패턴이나 Option 타입을 사용한다
- 예외는 정말 예외적인 상황에서만 발생시킨다
- catch 블록은 구체적인 예외 타입을 명시한다

## 프레임워크 구조 가이드

### 계층 구조
1. **Core Layer**: 도메인 모델과 핵심 인터페이스만 포함
2. **Infrastructure Layer**: 외부 시스템과의 통신 담당
3. **Application Layer**: 비즈니스 로직과 조정 담당
4. **Presentation Layer**: API나 UI 엔드포인트

### 모듈 간 통신
- 이벤트 기반 아키텍처를 기본으로 한다
- 직접적인 메서드 호출보다 메시지 패싱을 선호한다
- 각 모듈은 독립적으로 테스트 가능해야 한다

## 개발 순서 체크리스트

### 새 기능 추가 시
1. ✅ 기존 코드가 정상 빌드되는가?
2. ✅ 새 기능의 인터페이스를 먼저 정의했는가?
3. ✅ 가장 간단한 구현부터 시작했는가?
4. ✅ 단위 테스트를 작성했는가?
5. ✅ 기존 기능과의 통합을 검증했는가?

### 리팩토링 시
1. ✅ 현재 코드가 모든 테스트를 통과하는가?
2. ✅ 리팩토링 범위를 명확히 정의했는가?
3. ✅ 한 번에 하나의 리팩토링만 수행하는가?
4. ✅ 각 단계마다 테스트를 실행하는가?

## 금지 사항

### 절대 하지 말아야 할 것들
- ❌ "나중에 리팩토링하겠다"는 마음으로 코드 작성
- ❌ 테스트 없이 복잡한 로직 구현
- ❌ 주석으로 코드의 의도 설명 (코드 자체가 명확해야 함)
- ❌ 순환 의존성 생성
- ❌ God 클래스나 Utility 클래스 만들기
- ❌ Magic Number나 Magic String 사용
- ❌ 예외를 무시하거나 빈 catch 블록 작성

## 검증 기준

### 코드 리뷰 체크포인트
- 클래스가 하나의 책임만 가지는가?
- 메서드가 하나의 작업만 수행하는가?
- 변수명과 메서드명이 의도를 명확히 표현하는가?
- 중복 코드가 없는가?
- 테스트 가능한 구조인가?

### 완료 정의 (Definition of Done)
1. 코드가 컴파일된다
2. 기본 동작이 검증되었다
3. 예외 상황이 적절히 처리된다
4. 다른 개발자가 읽고 이해할 수 있다
5. 확장 가능한 구조를 유지한다

## 마무리 원칙

**"완벽한 전체보다 동작하는 부분이 낫다"**

복잡한 AI Agent Framework도 결국 작은 컴포넌트들의 조합이다. 각 컴포넌트를 완벽하게 만들고, 안정적으로 연결하면 전체 시스템도 안정적이 된다. 

매 순간 "지금 이 코드를 프로덕션에 배포할 수 있는가?"라는 질문에 "예"라고 답할 수 있어야 한다.